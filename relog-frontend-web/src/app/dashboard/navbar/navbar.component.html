<div class="m-navbar" (window:resize)="onResize($event)">
  <div class="brand">
    <h1>RECICLAPAC</h1>
  </div>

  <ul class="lista-menu">
    <li>
      <a routerLinkActive="active" routerLink="/rc/home">Home</a>
    </li>
    <li *ngIf="currentUser?.role === 'admin'">
      <a routerLinkActive="active" routerLink="/rc/alertas">Alertas</a>
    </li>
    <li *ngIf="currentUser?.role === 'admin'">
      <a routerLinkActive="active" routerLink="/rc/cadastros">Cadastros</a>
    </li>
    <li>
      <a routerLinkActive="active" routerLink="/rc/inventario">Inventário</a>
    </li>
    <!-- <li *ngIf="currentUser?.role === 'admin'">
      <a routerLinkActive="active" routerLink="/rc/importar">Importar Dados</a>
    </li> -->
    <li>
      <a routerLinkActive="active" routerLink="/rc/rastreamento">Geolocalização</a>
    </li>
    <li *ngIf="currentUser?.role === 'admin' && this.authenticationService.currentSettings()?.enable_gc16 === true">
      <a routerLinkActive="active" routerLink="/rc/bpline">BPline</a>
    </li>
    <li class="usuario" [ngbPopover]='popContent' placement="bottom-right" triggers="manual" #p="ngbPopover" (click)="p.toggle()" (shown)="posicionarPopOver()"> 
      <a class="botaoUsuario" routerLinkActive="active"></a>
    </li>
  </ul>

  <button class="button-menu" (click)="mudar()">
    <span class="button-line"></span>
    <span class="button-line"></span>
    <span class="button-line"></span>
  </button>

</div>

<div class="menu-secundario" [ngClass]="{ 'desaparecer': menuAparecer == false, 'aparecer': menuAparecer == true}">
  <div class="row">
    <div class="col-xs-12 col-sm-6 bloco-1">
      <ul class="listaEscondida">
        
        <li>
          <a (click)="mudar()" routerLinkActive="active" routerLink="/rc/home">Home</a>
        </li>

        <li *ngIf="currentUser?.role === 'admin'">
          <a routerLinkActive="active" routerLink="/rc/alertas">Alertas</a>
        </li>

        <li *ngIf="currentUser?.role === 'admin'">
          <a (click)="mudar()" routerLinkActive="active" routerLink="/rc/cadastros">Cadastros</a>
        </li>

        <li>
          <a (click)="mudar()" routerLinkActive="active" routerLink="/rc/inventario">Inventário</a>
        </li>

        <!-- <li *ngIf="currentUser?.role === 'admin'">
          <a (click)="mudar()" routerLinkActive="active" routerLink="/rc/importar">Importar Dados</a>
        </li> -->

        <li>
          <a (click)="mudar()" routerLinkActive="active" routerLink="/rc/rastreamento">Geolocalização</a>
        </li>

        <li *ngIf="currentUser?.role === 'admin' && this.authenticationService.currentSettings()?.enable_gc16 === true">
          <!-- <a (click)="mudar()" routerLinkActive="active" routerLink="/rc/gc16">BPline</a> -->
          <a (click)="mudar()" routerLinkActive="active" routerLink="/rc/bpline">BPline</a>
        </li>
    
      </ul>
    </div>

    <div class="col-xs-12 col-sm-6 bloco-2">
      <ul class="lista-menu-escondido">
        <li>
          <div>
            <div style="float: left;">
              <img width="50" *ngIf="currentUser?.role === 'admin'" src="./../../../assets/images/icon_a.png">
              <img width="50" *ngIf="currentUser?.role === 'client'" src="./../../../assets/images/icon_f.png">
            </div>
            <div style="float: left;">
              <p id="username">{{this.authenticationService.currentUser().user}} </p>

              <p class="user-type" *ngIf="currentUser?.role === 'admin'">Administrador da Empresa.</p>
              <p class="user-type" *ngIf="currentUser?.role === 'client'">Funcionário da Empresa.</p>
            </div>
          </div>
        </li>

        <li style="clear: both; padding: 5px 0px;">
          <hr>
        </li>

        <li>
          <a *ngIf="currentUser?.role === 'admin'" (click)="p.close(); openModal()">
            Gerenciar usuários </a>
        </li>

        <li>
          <a *ngIf="currentUser?.role === 'admin'" (click)="p.close();openSettings()"> Configurações </a>
        </li>

        <!-- <li>
          <a (click)="p.close();openModalEditar()"> Editar </a>
        </li> -->

        <li style="padding: 5px 0px;"> <hr> </li>

        <li>
          <a (click)="logout()"> Sair </a>
        </li>
      </ul>
    </div> 
  </div>
</div>

<ng-template #popContent id="m-popover">
  <div id="pop-over-content">
    <ul class="lista-menu-escondido">
      <li>
        <div>
          <div style="float: left;">
            <img width="50" *ngIf="currentUser?.role === 'admin'" src="./../../../assets/images/icon_a.png">
            <img width="50" *ngIf="currentUser?.role === 'client'" src="./../../../assets/images/icon_f.png">
          </div>

          <div style="float: left;">

            <p id="username">{{this.authenticationService.currentUser().user}} </p>
    
            <p class="user-type" *ngIf="currentUser?.role === 'admin'">Administrador da Empresa.</p>
            <p class="user-type" *ngIf="currentUser?.role === 'client'">Funcionário da Empresa.</p>
          </div>
        </div>
      </li>
    
      <li style="clear: both; padding: 5px 0px;">
        <hr>
      </li>
    
      <li>
        <a *ngIf="currentUser?.role === 'admin'" (click)="p.toggle(); openModal()"> Gerenciar usuários </a>
      </li>
    
      <li>
        <a *ngIf="currentUser?.role === 'admin'" (click)="p.close(); openSettings()">Configurações </a>
      </li>
    
      <!-- <li>
        <a (click)="p.close(); openModalEditar()"> Editar </a>
      </li> -->
    
      <li style="padding: 5px 0px;">
        <hr> 
      </li>
      
      <li>
        <a (click)="logout()"> Sair </a>
      </li>
    </ul>
  </div>
</ng-template>