<div class="base-bg">
  <h3 class="tituloClaro">Equipamentos</h3>

  <!-- Linha divisória -->
  <hr style="margin-top: 10px;">

  <div class="row">
    <div class="col-sm-12 clear-padding">
      <div class="col-sm-4">
        <p>FAMÍLIA</p>
        <ng-select  
          (change)="generalInventoryEquipamentChanged($event)" 
          [items]="listOfFamilies" 
          bindLabel="code" 
          placeholder="Selecione uma família">

          <ng-template ng-label-tmp let-item="item">
            {{item.code}}
          </ng-template>

          <ng-template ng-option-tmp let-item="item">
            <div>
              {{item.code}}
            </div>
          </ng-template>
        </ng-select>
      </div>
    </div>
  </div>

  <br>

  <div class="table-responsive">
    <table class="table">
      <thead>
        <!-- <tr class="cabecalho">
          <th>Equipamento</th>
          <th>Serial</th>
          <th>Tag</th>

          <th>Fornecedor</th>
          <th>Status Atual</th>
          <th>Planta Atual</th>

          <th>Local</th>
          <th>Bateria</th>
          <th>Temperatura</th>

          <th>Status</th>
          <th>Posições</th>
        </tr> -->
        <tr class="cabecalho">
          <th *ngFor="let header of headers">
            <span class="noselect d-flex" (click)="headerClick(header)">
              {{ header.label }}
              <span class="sort-icons noselect">
                <i class="fa fa-sort default-order" *ngIf="(header.name !== sort.name)"></i>
                <i class="fa fa-caret-up" *ngIf="(header.name == sort.name) && (sort.order == 'asc')"></i>
                <i class="fa fa-caret-down" *ngIf="(header.name == sort.name) && (sort.order == 'desc')"></i>
              </span>
            </span>
          </th> 
          <th>Data do sinal</th>
          <th>Posições</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let packing of generalEquipament | paginate: {
                                                          itemsPerPage: 10,
                                                          currentPage: actualPage,
                                                          totalItems: generalEquipament.length}">

          <td class="text-center">{{ packing.family_code || '-' }}</td>
          <td class="text-center">{{ packing.serial || '-' }}</td>
          <td>{{ packing.tag || '-' }}</td>

          <td>{{ packing.company || '-' }}</td>
          <td style="cursor: default;">{{ packing.current_state | packingStatus}}</td>
          <td style="cursor: default;">{{packing?.current_control_point_name ? packing.current_control_point_name : "-" }}</td>

          <td>{{ packing.current_control_point_type | type }} </td>
          <td class="text-center">{{ (packing.battery_percentage != undefined && packing.battery_percentage >= 0) ? ((packing.battery_percentage | round) + '%') : 'Sem Registro' }} </td>
          <td class="text-center">{{ packing.accuracy || '-' }} m</td>

          <td class="text-center">{{ getFormatedData(packing.date) }}</td>
          <td style="text-align: center;">
            <div class="bigger" (click)="openLayer(packing)">
              <div class="det"> </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="classVazio" *ngIf="generalEquipament.length < 1">
      Ainda não foram cadastradas embalagens no sistema.
    </div>
  </div>

  <br>

  <div class="has-text-centered">
    <pagination-controls class="my-pagination" (pageChange)="actualPage = $event" directionLinks="false" autoHide="true">
    </pagination-controls>
  </div>
</div>

<br>