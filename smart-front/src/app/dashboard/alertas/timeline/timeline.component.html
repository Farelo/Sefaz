<div class="conteudoTop">
  <div class="conteudoHome">
    <div class="header">
      Timeline

      <button type="button" class="interrogacao1" *ngIf="telaGrande == false" (click)="openHelp(content)">
      </button>

      <button type="button" class="interrogacao2" [ngbPopover]='popContent' placement="bottom" *ngIf="telaGrande == true" triggers='hover'
        (click)="openHelp(content)">
      </button>

      <ng-template #popContent>
        <p class="tit1">Alertas e seus significados</p>
        <span class="lg1">EMBALAGEM AUSENTE</span> <br />
        <span class="lg2">LOCAL INCORRETO</span> <br />
        <span class="lg3">BATERIA BAIXA</span> <br />
        <span class="lg4">EMBALAGEM ATRASADA</span> <br />
        <span class="lg5">TEMPO DE PERMANÊNCIA</span> <br />
        <!-- <span class="lg6"></span><br /> -->
      </ng-template>

      <ng-template #content>
        <div class="modalFilho">
          <p class="tit1" style="display: inline-block;">Alertas e seus significados</p>

          <button type="button" class="close" aria-label="Close" (click)="activeModal.dismiss('Cross click');">
            <span aria-hidden="true">&times;</span>
          </button>

          <div class="modalBody" style="text-align: center">
            <span class="lg1">EMBALAGEM AUSENTE</span> <br />
            <span class="lg2">LOCAL INCORRETO</span> <br />
            <span class="lg3">BATERIA BAIXA</span> <br />
            <span class="lg4">EMBALAGEM ATRASADA</span> <br />
            <span class="lg5">TEMPO DE PERMANÊNCIA</span> <br />
          </div>
        </div>
      </ng-template>
    </div>

    <div class="painel">
      <!-- [routerLink]="[alert.family_id, alert.current_state]" -->
      <div class="row quadradoPequeno" 
        placement="bottom"
        [tooltip]="getAlertText(alert.current_state)" 
        [routerLink]="[alert.family_id, alert.current_state]"
        [ngClass]="{
          'status0' : getAlertCode(alert.current_state) == 0,
          'status1' : getAlertCode(alert.current_state) == 1,
          'status2' : getAlertCode(alert.current_state) == 2,
          'status3' : getAlertCode(alert.current_state) == 3,
          'status4' : getAlertCode(alert.current_state) == 4,
          'status5' : getAlertCode(alert.current_state) == 5,
          'status6' : getAlertCode(alert.current_state) == 6 }" 
        *ngFor="let alert of listOfAlerts | paginate: { id:'alerts',
                                                      itemsPerPage: 16,
                                                      currentPage: listOfAlertsActualPage,
                                                      totalItems: listOfAlerts.length}">

        <div class="col-sm-6 esquerda">
          <span class="codigo" tooltip="Código da Embalagem">{{alert.family_code}}</span>
          <br />
          <span class="descricao" tooltip="Descrição">{{alert.packing?.type}}</span>
        </div>

        <div class="col-sm-6 direita">
          <div class="bigger" tooltip="Fornecedor">
            <div [ngClass]="{
              'f0' : getAlertCode(alert.current_state) == 0,
              'f1' : getAlertCode(alert.current_state) == 1,
              'f2' : getAlertCode(alert.current_state) == 2,
              'f3' : getAlertCode(alert.current_state) == 3,
              'f4' : getAlertCode(alert.current_state) == 4,
              'f5' : getAlertCode(alert.current_state) == 5,
              'f6' : getAlertCode(alert.current_state) == 6 }">
            </div>
          </div>
          <span tooltip="Fornecedor da Embalagem" class="forn">{{alert.company.name}}</span>
          <br />
          <span class="quantidade" 
            tooltip="Quantidade de embalagens" 
            [ngClass]="{
              'quantidade0' : getAlertCode(alert.current_state) == 0,
              'quantidade1' : getAlertCode(alert.current_state) == 1,
              'quantidade2' : getAlertCode(alert.current_state) == 2,
              'quantidade3' : getAlertCode(alert.current_state) == 3,
              'quantidade4' : getAlertCode(alert.current_state) == 4,
              'quantidade5' : getAlertCode(alert.current_state) == 5,
              'quantidade6' : getAlertCode(alert.current_state) == 6 }">{{alert.qtd }}</span>
        </div>
      </div>

      <!-- pagination -->
      <div style="width: 100%;" *ngIf="listOfAlerts.length > 0 ">
        <br />
        <div class="has-text-centered">
          <pagination-controls id='alerts' class="my-pagination" (pageChange)="listOfAlertsActualPage = $event" directionLinks="false" autoHide="true">
          </pagination-controls>
        </div>
      </div>

      <!-- no alerts to show -->
      <div class="externa" *ngIf="listOfAlerts.length < 1 ">
        <div class="row interna">
          <div class="col-sm-9 divTexto center">
            <p class="texto">No momento não existem alertas</p>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>